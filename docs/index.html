<!DOCTYPE html>
<!-- Built with spec-md https://spec-md.com -->
<html>
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><title>GraphQL Over HTTP</title>
<style>@media (prefers-color-scheme: light){:root{--color-foreground: #333333;--color-background: #ffffff;--color-light-grey: #ccc;--color-grey: #666666;--color-white: #fff;--color-link: #3b5998;--color-subsection-link: var(--color-foreground);--color-toc-link: var(--color-foreground);--color-toc-id: var(--color-link);--color-toggle-border: #bbc;--color-sidebar-background: #f0f0f0;--color-sidebar-viewing-link: #8b9;--color-sidebar-toggle-button: rgba(0, 0, 0, .7);--color-sidebar-shadow-inset: rgba(0, 0, 0, .05);--color-sidebar-shadow: rgba(0, 0, 0, .04);--color-sidebar-large-shadow: rgba(0, 0, 0, .08);--color-pre-background: #fafafa;--color-pre-border: #e9e9e9;--color-code-background: rgba(0, 0, 0, .03);--color-spec-todo: var(--color-grey);--color-spec-example: #fafaff;--color-spec-example-border: #bbbbff;--color-spec-counter-example: #fffafa;--color-spec-counter-border: #ffbbbb;--color-spec-counter-example-link: #98593b;--color-spec-added-border: #396;--color-spec-removed-border: #933;--color-spec-prose: var(--color-grey);--color-spec-quantifier-list: var(--color-link);--color-spec-quantifier-optional: #83238e;--color-spec-condition: #1c7758;--color-spec-param: var(--color-grey);--color-spec-rx: var(--color-foreground);--color-spec-note-border: #f4e925;--color-spec-note-background: #fefef3;--color-spec-note-first-link: #6c6613;--color-source-link: var(--color-light-grey);--color-table-header: #f9f9f9;--color-table-header-border: #d0d0d0;--color-token-inserted: hsla(241, 71%, 34%, .69);--color-token-deleted: hsla(324, 92%, 33%, .74);--color-inserts-background: rgba(0, 200, 30, .08);--color-deletions-background: rgba(200, 0, 0, .08);--selection-background-color: #cacee0;--selection-background-color-link: #f0babe}.selection-link:hover{--selection-background-color: #3b5998}}@media (prefers-color-scheme: dark){:root{--color-foreground: #b6b6b6;--color-background: #262626;--color-light-grey: #373737;--color-grey: #828282;--color-white: rgb(29, 29, 29);--color-link: #89b7da;--color-subsection-link: var(--color-foreground);--color-toc-link: var(--color-foreground);--color-toc-id: var(--color-link);--color-toggle-border: #bbc;--color-sidebar-background: #323232;--color-sidebar-viewing-link: #8b9;--color-sidebar-toggle-button: rgba(220, 220, 220, .7);--color-sidebar-shadow-inset: rgba(0, 0, 0, .05);--color-sidebar-shadow: rgba(0, 0, 0, .04);--color-sidebar-large-shadow: rgba(0, 0, 0, .08);--color-pre-background: #2e2e2e;--color-pre-border: #3a3a3a;--color-code-background: rgba(41, 41, 41, .03);--color-spec-todo: var(--color-grey);--color-spec-example: #2b2b35;--color-spec-example-border: #4d4d6d;--color-spec-counter-example: #322828;--color-spec-counter-border: #664040;--color-spec-counter-example-link: #ff702d;--color-spec-added-border: #396;--color-spec-removed-border: #933;--color-spec-prose: var(--color-grey);--color-spec-quantifier-list: var(--color-link);--color-spec-quantifier-optional: #c689ce;--color-spec-condition: #6fa889;--color-spec-param: var(--color-grey);--color-spec-rx: var(--color-foreground);--color-spec-note-border: #605e39;--color-spec-note-background: #303028;--color-spec-note-first-link: #f0e330;--color-source-link: var(--color-grey);--color-table-header: #373737;--color-table-header-border: #525252;--color-token-inserted: hsla(241, 63%, 70%, .69);--color-token-deleted: hsla(325, 64%, 67%, .74);--color-inserts-background: rgba(0, 200, 30, .08);--color-deletions-background: rgba(200, 0, 0, .08);--selection-background-color: #656565;--selection-background-color-link: #f0babe}.selection-link:hover{--selection-background-color: #829edb}}:root{color:var(--color-foreground);background-color:var(--color-background);font-family:var(--font-family);font-size:15px;line-height:1.5;--mono-font-size: 13px;--indent: 1rem;--list-indent: 1.5rem;--dfn-indent: 0rem;--font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;--font-family-monospace: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace}@media (min-width: 720px){:root{font-size:17px;--mono-font-size: 15px;--indent: 2rem;--list-indent: 2rem;--dfn-indent: 2rem}}body{margin:3rem 0 3rem}article{margin:0 1rem}@media (min-width: 720px){body{margin:6rem auto 3rem;max-width:800px;padding-left:75px;padding-right:clamp(0px,calc((100vw - 800px) * .25),75px)}}.source-link{display:none}@media screen and (min-width: 720px){.source-link{display:block;position:absolute;width:18px;fill:var(--color-source-link);opacity:.3}.source-link:hover{opacity:1}}.outdated-selection-link,.selection-link{position:absolute;display:block;color:var(--color-white);background:var(--selection-background-color);border-radius:4px;font-size:36px;height:23px;line-height:48px;text-align:center;text-decoration:none;width:25px;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.outdated-selection-link:hover,.selection-link:hover{text-decoration:none}.outdated-selection-link:before,.selection-link:before{border:5px solid transparent;content:"";height:0;margin-top:-5px;margin-right:-5px;position:absolute;right:1px;top:50%;width:0}@media (max-width: 719px){.outdated-selection-link:before,.selection-link:before{border-bottom-color:var(--selection-background-color);border-top:0;right:50%;top:1px}}@media (min-width: 720px){.outdated-selection-link:before,.selection-link:before{border-left-color:var(--selection-background-color);border-right:0;right:1px;top:50%}}.outdated-selection-link{background:var(--selection-background-color-link);font-size:21px;font-weight:800;line-height:27px}.outdated-selection-link:hover:after{content:"This selection content has changed since this link was created.";font:9pt/11pt var(--font-family);position:absolute;display:block;white-space:nowrap;padding:2px 5px 1px;top:-20px;background:black;color:var(--color-white)}a{color:var(--color-link);text-decoration:none}a:hover{text-decoration:underline}img{max-width:100%}dl{margin:1rem 0 1rem var(--dfn-indent)}dd{margin:.25em 0 .5em var(--indent)}dd+dd{margin-top:1rem}dfn,.spec-ref{font-style:italic}dfn>a,.spec-ref>a{color:inherit}h1,h2,h3,h4,h5,h6{font-weight:bold;margin:3em 0 1em;position:relative}@media (min-width: 720px){header>h1{margin:6em 0 3em}}h1{font-size:1.5em;margin-top:5em}h2,h3{font-size:1.25em}h4,h5,h6{font-size:1em}section{padding-top:1rem;margin-top:-1rem}section.subsec>h6{margin-top:2em}section.subsec>h6>a{color:var(--color-subsection-link)}section .spec-secid{margin-right:1ex}@media (min-width: 720px){section .spec-secid{position:absolute;right:100%;text-align:right;white-space:nowrap}}footer{font-size:75%;opacity:.5;text-align:center;margin-top:12rem}.spec-toc{margin:1rem 0 3rem}.spec-toc .title{content:"Contents";display:block;font-weight:bold;margin:5em 0 1em}.spec-toc .spec-secid{margin-right:1ex}.spec-toc ol{list-style:none;padding-left:0;margin-top:0;margin-bottom:0}.spec-toc ol ol{list-style:none;padding-left:2ex;margin-bottom:.25em}.spec-toc li{position:relative;padding:5px 0 0 30px;margin:-5px 0 0 -30px}.spec-toc a{color:var(--color-toc-link)}.spec-toc a:hover{text-decoration:none}.spec-toc a .spec-secid{color:var(--color-toc-id)}.spec-toc a:hover .spec-secid{text-decoration:underline}.spec-toc .toggle{display:none}.spec-toc .toggle+label{cursor:pointer;left:6px;opacity:1;padding:5px 6px 5px 7px;position:absolute;top:6px;transform:rotate(0deg);transition:all .18s ease-in-out}.spec-toc .toggle+label:after{border-color:transparent transparent transparent var(--color-toggle-border);border-style:solid;border-width:6px 0 6px 7px;content:" ";display:block;height:0;width:0}@media (pointer: fine){.spec-toc .toggle+label{left:10px;padding:3px 5px 3px 6px;top:8px}}.spec-toc .toggle:checked+label{transform:rotate(90deg)}@media (hover: hover){.spec-toc li:not(:hover)>.toggle:checked+label{opacity:0}}.spec-toc .toggle:not(:checked)~ol{max-height:0;overflow:hidden;margin:0}.spec-sidebar-toggle{display:none}.spec-sidebar-toggle+label>.spec-sidebar-button{position:fixed;right:0;top:0;padding:10px 15px;font-size:30px;color:var(--color-sidebar-toggle-button);z-index:2;cursor:pointer;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.spec-sidebar-toggle:checked+label:after{content:"";position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0}.spec-sidebar{display:none;position:fixed;right:0;top:0;width:min(320px,calc(100vw - 48px));font-size:14px;line-height:1.75;overflow-y:scroll;height:100%;padding:0 0 5rem 30px;box-sizing:border-box;background:var(--color-sidebar-background);box-shadow:inset 1px 0 var(--color-sidebar-shadow-inset),-4px 0 8px -2px var(--color-sidebar-shadow);overscroll-behavior:contain}.spec-sidebar{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.spec-sidebar-toggle:checked~.spec-sidebar{display:block}.spec-sidebar .viewing>a:after{color:var(--color-sidebar-viewing-link);content:"\2022";margin-left:1ex}@media (min-width: 1220px){.spec-sidebar-toggle+label{display:none}.spec-sidebar{display:block;box-shadow:inset 1px 0 var(--color-sidebar-shadow-inset),inset 4px 0 8px -2px var(--color-sidebar-large-shadow)!important}body{padding-right:345px}}.spec-note{background:var(--color-spec-note-background);border-left:solid 4px var(--color-spec-note-border);margin:1rem -1rem;min-width:70vw;padding:8px 1rem 12px calc(1rem - 4px);width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}@media (min-width: 720px){.spec-note{min-width:416px}}.spec-note>a:first-child{color:var(--color-spec-note-first-link);display:block;font:italic 11pt/18pt var(--font-family);opacity:.6;user-select:none}.spec-todo{color:var(--color-spec-todo);margin:1em 0 1em 5em;min-height:1em}.spec-todo::before{content:"todo";display:block;float:left;margin-left:-5em;text-transform:uppercase}.spec-index ol{list-style-type:none;margin:0 0 0 var(--indent);padding:0;column-width:210px;column-gap:var(--indent)}.spec-index ol li{width:min-content;white-space:nowrap}pre,code{font-family:var(--font-family-monospace);font-size:var(--mono-font-size);font-weight:inherit}code{background:var(--color-code-background);margin:-2px -1px;padding:3px 3px;white-space:pre-wrap}pre>code{background:none;font-weight:inherit;margin:0;padding:0;white-space:pre}pre{background:var(--color-pre-background);border-left:solid 4px var(--color-pre-border);margin:1rem -1rem;min-width:70vw;padding:12px 1rem 12px calc(1rem - 4px);width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;max-width:calc(100vw - 2rem);overflow-y:auto}@media (min-width: 720px){pre{min-width:40ch}}.spec-example{background:var(--color-spec-example);border-left:solid 4px var(--color-spec-example-border);padding-top:8px}.spec-counter-example{background:var(--color-spec-counter-example);border-left:solid 4px var(--color-spec-counter-border);padding-top:8px}.spec-example>a,.spec-counter-example>a{display:block;font:italic 11pt/18pt var(--font-family);opacity:.6;user-select:none}.spec-counter-example>a{color:var(--color-spec-counter-example-link)}table{border-collapse:collapse}th{background-color:var(--color-table-header)}td,th{border:1px solid var(--color-table-header-border);padding:.4em;vertical-align:baseline}ol,ul{padding-left:var(--list-indent)}li>ol,li>ul{margin-top:.25em;margin-bottom:.5em}li+li{margin-top:.25em}li.task{list-style-type:none;position:relative}li.task>input:first-child{margin-left:0;position:absolute;transform:translateX(calc(-100% - 1ch))}ins{background-color:var(--color-inserts-background);text-decoration:none}del{background-color:var(--color-deletions-background)}.spec-added,.spec-removed{border-left:4px solid;margin-left:-18px;padding-left:14px}.spec-added{border-color:var(--color-spec-added-border)}.spec-removed{border-color:var(--color-spec-removed-border);text-decoration:line-through}.spec-keyword{font-weight:bold}.spec-string{font-family:var(--font-family-monospace);font-size:85%;white-space:pre}var{font-style:italic}*[data-name]{transition:.15s background ease-out;border-radius:2px;padding:0 3px;margin:0 -3px}.spec-semantic,.spec-algo{margin:1rem 0 1rem var(--dfn-indent)}.spec-semantic>.spec-nt::after,.spec-algo>.spec-call:first-child::after{content:":";font-style:normal;font-weight:bold;margin-left:1ex}.spec-semantic ol,.spec-semantic ol ol ol ol,.spec-algo ol,.spec-algo ol ol ol ol{list-style-type:decimal}.spec-semantic ol ol,.spec-semantic ol ol ol ol ol,.spec-algo ol ol,.spec-algo ol ol ol ol ol{list-style-type:lower-alpha}.spec-semantic ol ol ol,.spec-semantic ol ol ol ol ol ol,.spec-algo ol ol ol,.spec-algo ol ol ol ol ol ol{list-style-type:lower-roman}.spec-call>a{color:inherit}.spec-production{margin:1rem 0 1rem var(--dfn-indent)}.spec-production>.spec-nt::after{content:":";font-style:normal;font-weight:bold;margin:0 1ex}.spec-semantic.d2>.spec-nt::after,.spec-production.d2>.spec-nt::after{content:"::"}.spec-semantic.d3>.spec-nt::after,.spec-production.d3>.spec-nt::after{content:":::"}.spec-production>.spec-rhs{line-height:1.1;margin:.25em 0 .5em calc(2 * var(--indent));text-indent:calc(-1 * var(--indent))}.spec-semantic>.spec-rhs{display:inline-block;text-indent:calc(-1 * var(--indent));margin-left:calc(1ex + var(--indent))}.spec-rhs>*{text-indent:0}.spec-oneof{display:inline}.spec-oneof::before{content:"one of";font-style:normal;font-weight:bold}.spec-oneof-grid{max-width:calc(100vw - 2rem);overflow:auto;margin:-1ex -1rem;padding:1ex 1rem}.spec-oneof-grid>table{margin-left:var(--indent)}.spec-oneof .spec-rhs{border:none;margin:0;padding:0 0 0 1rem;vertical-align:baseline;white-space:pre}.spec-oneof .spec-rhs:first-child{padding:0}.spec-rhs .spec-constrained:not(:first-child),.spec-rhs .spec-quantified:not(:first-child),.spec-rhs .spec-nt:not(:first-child),.spec-rhs .spec-t:not(:first-child),.spec-rhs .spec-rx:not(:first-child),.spec-rhs .spec-prose:not(:first-child),.spec-rhs .spec-empty:not(:first-child),.spec-rhs .spec-lookahead:not(:first-child){margin-left:1ex;display:inline-block}.spec-condition{font-size:85%}.spec-condition::before{content:"[if "}.spec-condition.not::before{content:"[if not "}.spec-condition::after{content:"]"}.spec-empty,.spec-prose{color:var(--color-spec-prose)}.spec-nt{font-style:italic}.spec-nt>a{color:inherit}.spec-quantifiers,.spec-params{font-size:65%;font-style:normal;vertical-align:sub}.spec-quantifier.list{color:var(--color-spec-quantifier-list)}.spec-quantifier.optional{color:var(--color-spec-quantifier-optional)}.spec-params,.spec-condition{color:var(--color-spec-condition)}.spec-params::before{content:"["}.spec-params::after{content:"]"}.spec-quantifier:not(:last-child)::after,.spec-param:not(:last-child)::after{color:var(--color-spec-param);content:", "}.spec-param.conditional::before{content:"?"}.spec-param.negated::before{content:"!"}.spec-t,.spec-rx{color:var(--color-spec-rx);font-family:var(--font-family-monospace);font-weight:bold}.spec-butnot::before{color:var(--color-grey);content:"but not";font-family:var(--font-family);font-weight:normal;margin-right:1ex}.spec-butnot>*:not(:first-child)::before{color:var(--color-grey);content:"or";font-family:var(--font-family);font-weight:normal;margin-right:1ex}.spec-rhs .spec-oneof::before,.spec-rhs .spec-butnot::before{margin-left:1ex}.spec-lookahead>*{margin:0!important}.spec-lookahead>*:not(:first-child)::before{color:var(--color-grey);content:", ";font-family:var(--font-family);font-style:normal;font-weight:normal}.spec-lookahead::before{color:var(--color-grey);content:"[lookahead = ";font-family:var(--font-family);font-style:normal;font-weight:normal}.spec-lookahead.not::before{content:"[lookahead \2260  "}.spec-lookahead.set::before{content:"[lookahead \2208  {";margin-right:0}.spec-lookahead.set.not::before{content:"[lookahead \2209  {"}.spec-lookahead.ntset::before{content:"[lookahead \2208  ";margin-right:0}.spec-lookahead.ntset.not::before{content:"[lookahead \2209  "}.spec-lookahead::after{color:var(--color-grey);content:"]"}.spec-lookahead.set::after{content:"}]"}code[class*=language-],pre[class*=language-]{color:var(--color-prism-foreground);background:none;text-shadow:0 1px var(--color-prism-text-shadow);font-family:var(--font-family-monospace);font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:var(--color-prism-background)}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:var(--color-prism-background)}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:var(--color-prism-block-background)}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.atrule,.token.attr-value,.token.keyword,.token.property,.token.selector,.token.attr-name,.token.builtin,.token.entity,.token.url,.token.inserted{color:var(--color-token-inserted);background:none}.token.tag,.token.boolean,.token.number,.token.string,.token.char,.token.constant,.token.symbol,.token.regex,.token.important,.token.variable,.token.function,.token.class-name,.token.deleted{color:var(--color-token-deleted)}.token.comment,.token.prolog,.token.doctype,.token.cdata,.token.description{color:inherit;opacity:.3}.token.punctuation{color:inherit;opacity:.5}.token.operator,.token.namespace{color:inherit;opacity:.7}</style>
<script>(function(){var r,a=[];document.addEventListener("readystatechange",function(){document.readyState==="interactive"&&u()});function u(){var n=document.querySelector('label[for="spec-sidebar-toggle"]');n.addEventListener("scroll",o),n.addEventListener("touchmove",o);function o(d){d.preventDefault()}for(var t=document.getElementsByTagName("section"),e=0;e<t.length;e++)t[e].getAttribute("secid")&&a.push(t[e]);var i=window.scrollY,c=!1;window.addEventListener("scroll",function(d){i=window.scrollY,c||(c=!0,window.requestAnimationFrame(function(){s(i),c=!1}))})}function s(n){for(var o=n+document.documentElement.clientHeight/4,t,e=a.length-1;e>=0;e--)if(a[e].offsetTop<o){t=a[e];break}var i=t&&t.getAttribute("secid");i!==r&&(r&&l(r,!1),i&&l(i,!0),r=i)}function l(n,o){document.getElementById("_sidebar_"+n).className=o?"viewing":"";for(var t=n.split(".");t.length;){var e=document.getElementById("_toggle_"+t.join("."));e&&(e.checked=o),t.pop()}}s(window.scrollY);})();</script>
<script>(function(){var n=document.getElementsByTagName("style")[0].sheet,e;function u(){e&&(n.deleteRule(e),e=void 0)}function d(t){u(),e=n.insertRule('*[data-name="'+t+'"] { background: rgba(230,215,0,0.12); }',n.cssRules.length)}document.documentElement.addEventListener("mouseover",function(t){var a=t.target.attributes["data-name"];a&&d(a.value)});document.documentElement.addEventListener("mouseout",u);})();</script>
<script>(function(){var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",o,p,r,g;document.addEventListener("selectionchange",E);window.addEventListener("resize",C);window.addEventListener("hashchange",x);window.addEventListener("load",x);function S(n){y(new URL(n.target.href))}function x(){y(window.location)}function y(n){var e=n.hash.match(/^#sel-([A-Za-z0-9-_]+)$/);if(!!e){g=e[1],r=k(g);var t=r.getBoundingClientRect(),d=Math.max(20,Math.floor((window.innerHeight-t.height)*.4));window.scrollTo(0,window.scrollY+t.y-d);var c=document.getSelection();c.empty(),c.addRange(r),C()}}function E(n){var e=document.getSelection();if(e.isCollapsed)o&&(o.parentNode.removeChild(o),o=null);else{var t=e.getRangeAt(0);(!r||t.compareBoundaryPoints(Range.START_TO_START,r)!==0||t.compareBoundaryPoints(Range.END_TO_END,r)!==0)&&(r=t,g=B(r),C())}}function C(){if(!!r){p||(p=document.getElementsByTagName("article")[0]),o||(o=document.createElement("a"),document.body.appendChild(o)),o.href="#sel-"+g,o.onclick=S,o.className=r.isOutdated?"outdated-selection-link":"selection-link",o.innerText=r.isOutdated?"!":"\u201F";var n=window.innerWidth<720,e=r.getBoundingClientRect();if(n)o.style.left=Math.floor(e.x+e.width/2+window.scrollX-13)+"px",o.style.top=Math.floor(e.bottom+window.scrollY+10)+"px";else{var t=p.getBoundingClientRect().x;o.style.left=Math.floor(t+window.scrollX-37)+"px",o.style.top=Math.floor(e.y+window.scrollY-3)+"px"}}}function B(n){var e="",t=N(n.startContainer),d=N(n.endContainer),c=M(t,d);return l(c),l(t.slice(c.length).concat(n.startOffset)),l(d.slice(c.length).concat(n.endOffset)),i(L(n.toString())),e;function i(a){do e+=R[a&31|(a>31?32:0)],a>>=5;while(a>0)}function l(a){i(a.length);for(var h=0;h<a.length;h++)i(a[h])}}function k(n){for(var e=new Array(64),t=0;t<64;t++)e[R.charCodeAt(t)]=t;var d=0,c=m(),i=m(),l=m(),a=w(),h=i.pop(),P=O(c.concat(i)),T=l.pop(),A=O(c.concat(l)),u=document.createRange();return u.setStart(P,h),u.setEnd(A,T),u.isOutdated=a!==void 0&&a!==L(u.toString()),u;function w(){for(var s=0,v=0;d<n.length;){var f=e[n.charCodeAt(d++)];if(s|=(f&31)<<v,v+=5,f<32)return s}}function m(){var s=w();if(s!=null){for(var v=new Array(s),f=0;f<s;f++)v[f]=w();return v}}}function N(n){for(var e=[];n!=document.body;){var t=n.parentNode;e.push(Array.prototype.indexOf.call(t.childNodes,n)),n=t}return e.reverse()}function O(n){for(var e=document.body,t=0;t<n.length&&e;t++)e=e.childNodes[n[t]];return e}function M(n,e){for(var t=0;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function L(n){for(var e=2166136261,t=0;t<n.length;++t)e^=n.charCodeAt(t),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return(e>>15^e)&32767}})();</script>
</head>
<body><article>
<header>
<h1>GraphQL Over HTTP</h1>
<section id="intro">
<div id="note-5194e" class="spec-note">
<a href="#note-5194e">Note</a>
<strong>Stage 2: Draft</strong> &mdash; this spec is not yet official, but is now a fully formed solution. Drafts may continue to evolve and change, occasionally dramatically, and are not guaranteed to be accepted. Therefore, it is unwise to rely on a draft in a production GraphQL Service.</div>
<p>---</p>
</section>
<nav class="spec-toc">
<div class="title">Contents</div>
<ol>
<li><a href="#sec-GraphQL-over-HTTP"><span class="spec-secid">1</span>GraphQL over HTTP</a></li>
<li><a href="#sec-Overview"><span class="spec-secid">2</span>Overview</a></li>
<li><a href="#sec-URL"><span class="spec-secid">3</span>URL</a></li>
<li><a href="#sec-Serialization-Format"><span class="spec-secid">4</span>Serialization Format</a><ol>
<li><a href="#sec-Media-Types"><span class="spec-secid">4.1</span>Media Types</a></li>
</ol>
</li>
<li><a href="#sec-Request"><span class="spec-secid">5</span>Request</a><ol>
<li><a href="#sec-Request-Parameters"><span class="spec-secid">5.1</span>Request Parameters</a></li>
<li><a href="#sec-Accept"><span class="spec-secid">5.2</span>Accept</a><ol>
<li><a href="#sec-Legacy-Watershed"><span class="spec-secid">5.2.1</span>Legacy Watershed</a></li>
</ol>
</li>
<li><a href="#sec-GET"><span class="spec-secid">5.3</span>GET</a><ol>
<li><a href="#sec-GET.Example"><span class="spec-secid">5.3.1</span>Example</a></li>
</ol>
</li>
<li><a href="#sec-POST"><span class="spec-secid">5.4</span>POST</a><ol>
<li><a href="#sec-JSON-Encoding"><span class="spec-secid">5.4.1</span>JSON Encoding</a></li>
<li><a href="#sec-POST.Example"><span class="spec-secid">5.4.2</span>Example</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Response"><span class="spec-secid">6</span>Response</a><ol>
<li><a href="#sec-Body"><span class="spec-secid">6.1</span>Body</a><ol>
<li><a href="#sec-Legacy-watershed"><span class="spec-secid">6.1.1</span>Legacy watershed</a></li>
</ol>
</li>
<li><a href="#sec-Validation"><span class="spec-secid">6.2</span>Validation</a></li>
<li><a href="#sec-Execution"><span class="spec-secid">6.3</span>Execution</a></li>
<li><a href="#sec-Status-Codes"><span class="spec-secid">6.4</span>Status Codes</a><ol>
<li><a href="#sec-application-json"><span class="spec-secid">6.4.1</span>application/json</a><ol>
<li><a href="#sec-application-json.Examples"><span class="spec-secid">6.4.1.1</span>Examples</a><ol>
<li><a href="#sec-application-json.Examples.JSON-parsing-failure"><span class="spec-secid">6.4.1.1.1</span>JSON parsing failure</a></li>
<li><a href="#sec-application-json.Examples.Invalid-parameters"><span class="spec-secid">6.4.1.1.2</span>Invalid parameters</a></li>
<li><a href="#sec-application-json.Examples.Document-parsing-failure"><span class="spec-secid">6.4.1.1.3</span>Document parsing failure</a></li>
<li><a href="#sec-application-json.Examples.Document-validation-failure"><span class="spec-secid">6.4.1.1.4</span>Document validation failure</a></li>
<li><a href="#sec-application-json.Examples.Operation-cannot-be-determined"><span class="spec-secid">6.4.1.1.5</span>Operation cannot be determined</a></li>
<li><a href="#sec-application-json.Examples.Variable-coercion-failure"><span class="spec-secid">6.4.1.1.6</span>Variable coercion failure</a></li>
<li><a href="#sec-application-json.Examples.Field-errors-encountered-during-execution"><span class="spec-secid">6.4.1.1.7</span>Field errors encountered during execution</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-application-graphql-response-json"><span class="spec-secid">6.4.2</span>application/graphql-response+json</a><ol>
<li><a href="#sec-application-graphql-response-json.Examples"><span class="spec-secid">6.4.2.1</span>Examples</a><ol>
<li><a href="#sec-application-graphql-response-json.Examples.JSON-parsing-failure"><span class="spec-secid">6.4.2.1.1</span>JSON parsing failure</a></li>
<li><a href="#sec-application-graphql-response-json.Examples.Invalid-parameters"><span class="spec-secid">6.4.2.1.2</span>Invalid parameters</a></li>
<li><a href="#sec-application-graphql-response-json.Examples.Document-parsing-failure"><span class="spec-secid">6.4.2.1.3</span>Document parsing failure</a></li>
<li><a href="#sec-application-graphql-response-json.Examples.Document-validation-failure"><span class="spec-secid">6.4.2.1.4</span>Document validation failure</a></li>
<li><a href="#sec-application-graphql-response-json.Examples.Operation-cannot-be-determined"><span class="spec-secid">6.4.2.1.5</span>Operation cannot be determined</a></li>
<li><a href="#sec-application-graphql-response-json.Examples.Variable-coercion-failure"><span class="spec-secid">6.4.2.1.6</span>Variable coercion failure</a></li>
<li><a href="#sec-application-graphql-response-json.Examples.Field-errors-encountered-during-execution"><span class="spec-secid">6.4.2.1.7</span>Field errors encountered during execution</a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Processing-the-response"><span class="spec-secid">6.5</span>Processing the response</a></li>
</ol>
</li>
<li><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</nav>
</header>
<section id="sec-GraphQL-over-HTTP" secid="1">
<h1><span class="spec-secid" title="link to this section"><a href="#sec-GraphQL-over-HTTP">1</a></span>GraphQL over HTTP</h1>
<section id="sec-GraphQL-over-HTTP.Introduction" class="subsec">
<h6><a href="#sec-GraphQL-over-HTTP.Introduction" title="link to this subsection">Introduction</a></h6>
<p>This specification details how GraphQL should be served and consumed over HTTP in order to maximize interoperability between clients, servers and tools. This specification does not override or replace the <a href="https://spec.graphql.org">GraphQL specification</a>, it extends it to cover the topic of serving GraphQL services over HTTP. If any statement or algorithm in this specification appears to conflict with the GraphQL specification, the behavior detailed in the GraphQL specification should be used (and an issue raised).</p>
<p>The <a href="https://spec.graphql.org">GraphQL specification</a> deliberately does not specify the transport layer, however HTTP is the most common choice when serving GraphQL to remote clients due to its ubiquity.</p>
<p>Previous to this specification, the article <a href="https://graphql.org/learn/serving-over-http">Serving over HTTP</a> (<a href="https://web.archive.org/web/20220601155421/https://graphql.org/learn/serving-over-http">WayBack Machine entry, 1st June 2022</a>) on the graphql.org website served as guidance, and leading implementations on both client and server have mostly upheld those best practices and thus established a de-facto standard that is commonly used throughout the ecosystem. This specification aims to codify and expand on this work.</p>
</section>
<section id="sec-GraphQL-over-HTTP.Copyright-notice" class="subsec">
<h6><a href="#sec-GraphQL-over-HTTP.Copyright-notice" title="link to this subsection">Copyright notice</a></h6>
<p>Copyright © 2022-present, GraphQL contributors</p>
<p>THESE MATERIALS ARE PROVIDED &ldquo;AS IS&rdquo;. The parties expressly disclaim any warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to the materials. The entire risk as to implementing or otherwise using the materials is assumed by the implementer and user. IN NO EVENT WILL THE PARTIES BE LIABLE TO ANY OTHER PARTY FOR LOST PROFITS OR ANY FORM OF INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER FROM ANY CAUSES OF ACTION OF ANY KIND WITH RESPECT TO THIS DELIVERABLE OR ITS GOVERNING AGREEMENT, WHETHER BASED ON BREACH OF CONTRACT, TORT (INCLUDING NEGLIGENCE), OR OTHERWISE, AND WHETHER OR NOT THE OTHER MEMBER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</section>
<section id="sec-GraphQL-over-HTTP.Conformance" class="subsec">
<h6><a href="#sec-GraphQL-over-HTTP.Conformance" title="link to this subsection">Conformance</a></h6>
<p>A conforming implementation of GraphQL over HTTP must fulfill all normative requirements. Conformance requirements are described in this document via both descriptive assertions and key words with clearly defined meanings.</p>
<p>The key words &ldquo;MUST&rdquo;, &ldquo;MUST NOT&rdquo;, &ldquo;REQUIRED&rdquo;, &ldquo;SHALL&rdquo;, &ldquo;SHALL NOT&rdquo;, &ldquo;SHOULD&rdquo;, &ldquo;SHOULD NOT&rdquo;, &ldquo;RECOMMENDED&rdquo;, &ldquo;MAY&rdquo;, and &ldquo;OPTIONAL&rdquo; in the normative portions of this document are to be interpreted as described in <a href="https://tools.ietf.org/html/rfc2119">IETF RFC 2119</a>. These key words may appear in lowercase and still retain their meaning unless explicitly declared as non-normative.</p>
<p>A conforming implementation of GraphQL over HTTP may provide additional functionality, but must not where explicitly disallowed or would otherwise result in non-conformance.</p>
</section>
<section id="sec-GraphQL-over-HTTP.Non-Normative-Portions" class="subsec">
<h6><a href="#sec-GraphQL-over-HTTP.Non-Normative-Portions" title="link to this subsection">Non-Normative Portions</a></h6>
<p>All contents of this document are normative except portions explicitly declared as non-normative.</p>
<p>Examples in this document are non-normative, and are presented to aid understanding of introduced concepts and the behavior of normative portions of the specification. Examples are either introduced explicitly in prose (e.g. &ldquo;for example&rdquo;) or are set apart in example or counter-example blocks, like this:</p>
<pre id="example-fed99" class="spec-example"><a href="#example-fed99">Example № 1</a><code>This is an example of a non-normative example.
</code></pre>
<pre id="example-881bd" class="spec-counter-example"><a href="#example-881bd">Counter Example № 2</a><code>This is an example of a non-normative counter-example.
</code></pre>
<p>Notes in this document are non-normative, and are presented to clarify intent, draw attention to potential edge-cases and pit-falls, and answer common questions that arise during implementation. Notes are either introduced explicitly in prose (e.g. &ldquo;Note: &ldquo;) or are set apart in a note block, like this:</p>
<div id="note-c0129" class="spec-note">
<a href="#note-c0129">Note</a>
This is an example of a non-normative note.</div>
</section>
</section>
<section id="sec-Overview" secid="2">
<h1><span class="spec-secid" title="link to this section"><a href="#sec-Overview">2</a></span>Overview</h1>
<section id="sec-Overview.S1" class="subsec">
<h6><a href="#sec-Overview.S1" title="link to this subsection">S1</a></h6>
<p>Though <a href="https://spec.graphql.org">the GraphQL specification</a> is transport agnostic, this GraphQL over HTTP specification aims to map GraphQL&rsquo;s semantics to their HTTP equivalents, enabling us to combine the full advantages of GraphQL with the rich feature set of HTTP.</p>
</section>
<section id="sec-Overview.S2" class="subsec">
<h6><a href="#sec-Overview.S2" title="link to this subsection">S2</a></h6>
<p>GraphQL queries and mutations naturally mirror the request/response message model used in HTTP, allowing us to provide a GraphQL request in an HTTP request and a GraphQL response in an HTTP response.</p>
</section>
<section id="sec-Overview.S3" class="subsec">
<h6><a href="#sec-Overview.S3" title="link to this subsection">S3</a></h6>
<p>In this document, the term <dfn id="server"><a href="#server" data-name="server">server</a></dfn> refers to a GraphQL over HTTP Specification compliant HTTP server unless the context indicates otherwise.</p>
</section>
<section id="sec-Overview.S4" class="subsec">
<h6><a href="#sec-Overview.S4" title="link to this subsection">S4</a></h6>
<p>The role of a <span class="spec-ref"><a href="#server" data-name="server">server</a></span> is to provide a <span class="spec-ref"><a href="#client" data-name="client">client</a></span> access to one or more GraphQL services over HTTP. A <span class="spec-ref"><a href="#server" data-name="server">server</a></span> is not a <em>GraphQL service</em>, it is a GraphQL service host.</p>
</section>
<section id="sec-Overview.S5" class="subsec">
<h6><a href="#sec-Overview.S5" title="link to this subsection">S5</a></h6>
<p>In this document, the term <dfn id="client"><a href="#client" data-name="client">client</a></dfn> refers to a GraphQL over HTTP Specification compliant HTTP client unless the context indicates otherwise.</p>
</section>
<section id="sec-Overview.S6" class="subsec">
<h6><a href="#sec-Overview.S6" title="link to this subsection">S6</a></h6>
<p>The role of a <span class="spec-ref"><a href="#client" data-name="client">client</a></span> is to issue HTTP requests to a <span class="spec-ref"><a href="#server" data-name="server">server</a></span> in order to interact with a <em>GraphQL service</em>.</p>
</section>
<section id="sec-Overview.S7" class="subsec">
<h6><a href="#sec-Overview.S7" title="link to this subsection">S7</a></h6>
<div id="note-25025" class="spec-note">
<a href="#note-25025">Note</a>
GraphQL Subscriptions are beyond the scope of this specification at this time.</div>
</section>
</section>
<section id="sec-URL" secid="3">
<h1><span class="spec-secid" title="link to this section"><a href="#sec-URL">3</a></span>URL</h1>
<section id="sec-URL.S8" class="subsec">
<h6><a href="#sec-URL.S8" title="link to this subsection">S8</a></h6>
<p>A <span class="spec-ref"><a href="#server" data-name="server">server</a></span> MUST enable GraphQL requests to one or more GraphQL schemas.</p>
</section>
<section id="sec-URL.S9" class="subsec">
<h6><a href="#sec-URL.S9" title="link to this subsection">S9</a></h6>
<p>Each GraphQL schema a <span class="spec-ref"><a href="#server" data-name="server">server</a></span> provides MUST be served via one or more URLs.</p>
</section>
<section id="sec-URL.S10" class="subsec">
<h6><a href="#sec-URL.S10" title="link to this subsection">S10</a></h6>
<p>A <span class="spec-ref"><a href="#server" data-name="server">server</a></span> MUST NOT require the <span class="spec-ref"><a href="#client" data-name="client">client</a></span> to use different URLs for different GraphQL query and mutation requests to the same GraphQL schema.</p>
</section>
<section id="sec-URL.S11" class="subsec">
<h6><a href="#sec-URL.S11" title="link to this subsection">S11</a></h6>
<p>The GraphQL schema available via a single URL MAY be different for different clients. For example, alpha testers or authenticated users may have access to a schema with additional fields.</p>
</section>
<section id="sec-URL.S12" class="subsec">
<h6><a href="#sec-URL.S12" title="link to this subsection">S12</a></h6>
<p>A <span class="spec-ref"><a href="#server" data-name="server">server</a></span> MAY forbid individual requests by a <span class="spec-ref"><a href="#client" data-name="client">client</a></span> to any endpoint for any reason, for example to require authentication or payment; when doing so it SHOULD use the relevant <code>4xx</code> or <code>5xx</code> status code. This decision SHOULD NOT be based on the contents of a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span>.</p>
</section>
<section id="sec-URL.S13" class="subsec">
<h6><a href="#sec-URL.S13" title="link to this subsection">S13</a></h6>
<div id="note-6e398" class="spec-note">
<a href="#note-6e398">Note</a>
The <span class="spec-ref"><a href="#server" data-name="server">server</a></span> should not make authorization decisions based on any part of the <em>GraphQL request</em>; these decisions should be made by the <em>GraphQL schema</em> during <a href="https://spec.graphql.org/draft/#ExecuteRequest()">GraphQL&rsquo;s ExecuteRequest()</a>, allowing for a partial response to be generated.</div>
</section>
<section id="sec-URL.S14" class="subsec">
<h6><a href="#sec-URL.S14" title="link to this subsection">S14</a></h6>
<p>Server URLs which enable GraphQL requests MAY also be used for other purposes, as long as they don&rsquo;t conflict with the server&rsquo;s responsibility to handle GraphQL requests.</p>
</section>
<section id="sec-URL.S15" class="subsec">
<h6><a href="#sec-URL.S15" title="link to this subsection">S15</a></h6>
<p>It is RECOMMENDED to end the path component of the URL with <code>/graphql</code>, for example:</p>
<pre id="example-910fc" class="spec-example" data-language="url"><a href="#example-910fc">Example № 3</a><code><span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">example.com</span></span><span class="token path"><span class="token path-separator">/</span>graphql</span>
</code></pre>
<pre id="example-a57f1" class="spec-example" data-language="url"><a href="#example-a57f1">Example № 4</a><code><span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">product.example.com</span></span><span class="token path"><span class="token path-separator">/</span>graphql</span>
</code></pre>
<pre id="example-699ca" class="spec-example" data-language="url"><a href="#example-699ca">Example № 5</a><code><span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">example.com</span></span><span class="token path"><span class="token path-separator">/</span>product<span class="token path-separator">/</span>graphql</span>
</code></pre>
</section>
</section>
<section id="sec-Serialization-Format" secid="4">
<h1><span class="spec-secid" title="link to this section"><a href="#sec-Serialization-Format">4</a></span>Serialization Format</h1>
<section id="sec-Serialization-Format.S16" class="subsec">
<h6><a href="#sec-Serialization-Format.S16" title="link to this subsection">S16</a></h6>
<p>The GraphQL specification allows for many <a href="https://spec.graphql.org/draft/#sec-Serialization-Format">serialization formats to be implemented</a>. Servers and clients MUST support JSON and MAY support other, additional serialization formats.</p>
</section>
<section id="sec-Serialization-Format.S17" class="subsec">
<h6><a href="#sec-Serialization-Format.S17" title="link to this subsection">S17</a></h6>
<div id="note-2ced2" class="spec-note">
<a href="#note-2ced2">Note</a>
Allowing other media types, particularly on requests, can be insecure.</div>
</section>
<section id="sec-Serialization-Format.S18" class="subsec">
<h6><a href="#sec-Serialization-Format.S18" title="link to this subsection">S18</a></h6>
<p>For consistency and ease of notation, examples of the response are given in JSON throughout this specification.</p>
</section>
<section id="sec-Media-Types" secid="4.1">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Media-Types">4.1</a></span>Media Types</h2>
<section id="sec-Media-Types.S19" class="subsec">
<h6><a href="#sec-Media-Types.S19" title="link to this subsection">S19</a></h6>
<p>The following are the officially recognized GraphQL media types to designate using the JSON encoding for GraphQL requests:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>application/json</code></td>
<td>Standard type for GraphQL JSON requests</td>
</tr>
</tbody>
</table>
</section>
<section id="sec-Media-Types.S20" class="subsec">
<h6><a href="#sec-Media-Types.S20" title="link to this subsection">S20</a></h6>
<p>And for a <em>GraphQL response</em>:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>application/graphql-response+json</code></td>
<td>The preferred type for server responses; better HTTP compatibility</td>
</tr>
<tr>
<td><code>application/json</code></td>
<td>An alternative type for responses (to support legacy clients)</td>
</tr>
</tbody>
</table>
</section>
<section id="sec-Media-Types.S21" class="subsec">
<h6><a href="#sec-Media-Types.S21" title="link to this subsection">S21</a></h6>
<p>For details of the shapes of these JSON payloads, please see <a href="#sec-Request">Request</a> and <a href="#sec-Response">Response</a>.</p>
</section>
<section id="sec-Media-Types.S22" class="subsec">
<h6><a href="#sec-Media-Types.S22" title="link to this subsection">S22</a></h6>
<p>If the media type in a <code>Content-Type</code> or <code>Accept</code> header does not include encoding information and matches one of the officially recognized GraphQL media types, then <code>utf-8</code> MUST be assumed (e.g. for header <code>Content-Type: application/graphql-response+json</code>, UTF-8 encoding would be assumed).</p>
</section>
</section>
</section>
<section id="sec-Request" secid="5">
<h1><span class="spec-secid" title="link to this section"><a href="#sec-Request">5</a></span>Request</h1>
<section id="sec-Request.S23" class="subsec">
<h6><a href="#sec-Request.S23" title="link to this subsection">S23</a></h6>
<p>A server MUST accept POST requests, and MAY accept other HTTP methods, such as GET.</p>
</section>
<section id="sec-Request-Parameters" secid="5.1">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Request-Parameters">5.1</a></span>Request Parameters</h2>
<section id="sec-Request-Parameters.S24" class="subsec">
<h6><a href="#sec-Request-Parameters.S24" title="link to this subsection">S24</a></h6>
<p>A <dfn id="graphql-over-http-request"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></dfn> is an HTTP request that encodes the following parameters in one of the manners described in this specification:</p>
</section>
<section id="sec-Request-Parameters.S25" class="subsec">
<h6><a href="#sec-Request-Parameters.S25" title="link to this subsection">S25</a></h6>
<ul>
<li><var data-name="query">query</var> - (<em>Required</em>, string): The string representation of the Source Text of a GraphQL Document as specified in <a href="https://spec.graphql.org/draft/#sec-Language">the Language section of the GraphQL specification</a>.</li>
</ul>
</section>
<section id="sec-Request-Parameters.S26" class="subsec">
<h6><a href="#sec-Request-Parameters.S26" title="link to this subsection">S26</a></h6>
<ul>
<li><var data-name="operationName">operationName</var> - (<em>Optional</em>, string): The name of the Operation in the Document to execute.</li>
</ul>
</section>
<section id="sec-Request-Parameters.S27" class="subsec">
<h6><a href="#sec-Request-Parameters.S27" title="link to this subsection">S27</a></h6>
<ul>
<li><var data-name="variables">variables</var> - (<em>Optional</em>, map): Values for any Variables defined by the Operation.</li>
</ul>
</section>
<section id="sec-Request-Parameters.S28" class="subsec">
<h6><a href="#sec-Request-Parameters.S28" title="link to this subsection">S28</a></h6>
<ul>
<li><var data-name="extensions">extensions</var> - (<em>Optional</em>, map): This entry is reserved for implementors to extend the protocol however they see fit.</li>
</ul>
</section>
<section id="sec-Request-Parameters.S29" class="subsec">
<h6><a href="#sec-Request-Parameters.S29" title="link to this subsection">S29</a></h6>
<div id="note-36c4d" class="spec-note">
<a href="#note-36c4d">Note</a>
When comparing <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> against the term <a href="https://spec.graphql.org/draft/#request">&ldquo;request&rdquo;</a> in the GraphQL specification you should note the <em>GraphQL schema</em> and &ldquo;initial value&rdquo; are not included in the GraphQL-over-HTTP <em>request</em>; they are handled by the <span class="spec-ref"><a href="#server" data-name="server">server</a></span> based on the URL used.</div>
</section>
<section id="sec-Request-Parameters.S30" class="subsec">
<h6><a href="#sec-Request-Parameters.S30" title="link to this subsection">S30</a></h6>
<div id="note-00557" class="spec-note">
<a href="#note-00557">Note</a>
Be aware that <code>query</code> is a misleading parameter name as its value is a string describing one or more operations, each of which may be a query or mutation. A better name would have been <code>document</code>, but the term <code>query</code> is well established.</div>
</section>
<section id="sec-Request-Parameters.S31" class="subsec">
<h6><a href="#sec-Request-Parameters.S31" title="link to this subsection">S31</a></h6>
<div id="note-43b86" class="spec-note">
<a href="#note-43b86">Note</a>
Depending on the serialization format used, values of the aforementioned parameters can be encoded differently but their names and semantics must stay the same.</div>
</section>
<section id="sec-Request-Parameters.S32" class="subsec">
<h6><a href="#sec-Request-Parameters.S32" title="link to this subsection">S32</a></h6>
<div id="note-564ee" class="spec-note">
<a href="#note-564ee">Note</a>
An HTTP request that encodes parameters of the same names but of the wrong type, or that omits required parameters, is not a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span>.</div>
</section>
<section id="sec-Request-Parameters.S33" class="subsec">
<h6><a href="#sec-Request-Parameters.S33" title="link to this subsection">S33</a></h6>
<div id="note-22957" class="spec-note">
<a href="#note-22957">Note</a>
Specifying <code>null</code> for optional request parameters is equivalent to not specifying them at all.</div>
</section>
<section id="sec-Request-Parameters.S34" class="subsec">
<h6><a href="#sec-Request-Parameters.S34" title="link to this subsection">S34</a></h6>
<div id="note-bba80" class="spec-note">
<a href="#note-bba80">Note</a>
So long as it is a string, <var data-name="query">query</var> does not have to parse or validate to be part of a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span>.</div>
</section>
</section>
<section id="sec-Accept" secid="5.2">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Accept">5.2</a></span>Accept</h2>
<section id="sec-Accept.S35" class="subsec">
<h6><a href="#sec-Accept.S35" title="link to this subsection">S35</a></h6>
<p>A client SHOULD indicate the media types that it supports in responses using the <code>Accept</code> HTTP header as specified in <a href="https://datatracker.ietf.org/doc/html/rfc7231">RFC7231</a>.</p>
</section>
<section id="sec-Accept.S36" class="subsec">
<h6><a href="#sec-Accept.S36" title="link to this subsection">S36</a></h6>
<div id="note-4b248" class="spec-note">
<a href="#note-4b248">Note</a>
If a client does not supply the <code>Accept</code> header then the server may respond with an error, or with any content type it chooses. To ensure your client gets something useful, it should indicate the media types it supports.</div>
</section>
<section id="sec-Accept.S37" class="subsec">
<h6><a href="#sec-Accept.S37" title="link to this subsection">S37</a></h6>
<p>If the client supplies an <code>Accept</code> header, the client SHOULD include the media type <code>application/graphql-response+json</code> in the <code>Accept</code> header.</p>
</section>
<section id="sec-Accept.S38" class="subsec">
<h6><a href="#sec-Accept.S38" title="link to this subsection">S38</a></h6>
<div id="note-b7f6d" class="spec-note">
<a href="#note-b7f6d">Note</a>
From 1st Jan 2025, every <span class="spec-ref"><a href="#server" data-name="server">server</a></span> and <span class="spec-ref"><a href="#client" data-name="client">client</a></span> must support <code>application/graphql-response+json</code>, so including this in the Accept header should give your client compatibility with any <span class="spec-ref"><a href="#server" data-name="server">server</a></span>.</div>
</section>
<section id="sec-Legacy-Watershed" secid="5.2.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Legacy-Watershed">5.2.1</a></span>Legacy Watershed</h3>
<section id="sec-Legacy-Watershed.S39" class="subsec">
<h6><a href="#sec-Legacy-Watershed.S39" title="link to this subsection">S39</a></h6>
<p>Before <code>2025-01-01T00:00:00Z</code>, if the client supplies an <code>Accept</code> header, the header SHOULD include the <code>application/json</code> media type. After this watershed, this is no longer necessary.</p>
</section>
<section id="sec-Legacy-Watershed.S40" class="subsec">
<h6><a href="#sec-Legacy-Watershed.S40" title="link to this subsection">S40</a></h6>
<p>It is RECOMMENDED that a client set the <code>Accept</code> header to <code>application/graphql-response+json; charset=utf-8, application/json; charset=utf-8</code>.</p>
</section>
<section id="sec-Legacy-Watershed.S41" class="subsec">
<h6><a href="#sec-Legacy-Watershed.S41" title="link to this subsection">S41</a></h6>
<div id="note-507e9" class="spec-note">
<a href="#note-507e9">Note</a>
This recommended header enables compatibility with legacy servers whilst still leveraging modern features if available in the server.</div>
</section>
</section>
</section>
<section id="sec-GET" secid="5.3">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-GET">5.3</a></span>GET</h2>
<section id="sec-GET.S42" class="subsec">
<h6><a href="#sec-GET.S42" title="link to this subsection">S42</a></h6>
<p>For HTTP GET requests, the <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> parameters MUST be provided in the query component of the request URL, encoded in the <code>application/x-www-form-urlencoded</code> format as specified by the <a href="https://url.spec.whatwg.org/#interface-urlsearchparams">WhatWG URLSearchParams class</a>.</p>
</section>
<section id="sec-GET.S43" class="subsec">
<h6><a href="#sec-GET.S43" title="link to this subsection">S43</a></h6>
<p>The <var data-name="query">query</var> parameter MUST be the string representation of the source text of the document as specified in <a href="https://spec.graphql.org/draft/#sec-Language">the Language section of the GraphQL specification</a>.</p>
</section>
<section id="sec-GET.S44" class="subsec">
<h6><a href="#sec-GET.S44" title="link to this subsection">S44</a></h6>
<p>The <var data-name="operationName">operationName</var> parameter, if present, must be a string.</p>
</section>
<section id="sec-GET.S45" class="subsec">
<h6><a href="#sec-GET.S45" title="link to this subsection">S45</a></h6>
<p>Each of the <var data-name="variables">variables</var> and <var data-name="extensions">extensions</var> parameters, if used, MUST be encoded as a JSON string.</p>
</section>
<section id="sec-GET.S46" class="subsec">
<h6><a href="#sec-GET.S46" title="link to this subsection">S46</a></h6>
<p>The <var data-name="operationName">operationName</var> parameter, if supplied and not the empty string, represents the name of the operation to be executed within the <var data-name="query">query</var> as a string.</p>
</section>
<section id="sec-GET.S47" class="subsec">
<h6><a href="#sec-GET.S47" title="link to this subsection">S47</a></h6>
<div id="note-8d47f" class="spec-note">
<a href="#note-8d47f">Note</a>
In the final URL all of these parameters will appear in the query component of the request URL as URL-encoded values due to the WhatWG URLSearchParams encoding specified above.</div>
</section>
<section id="sec-GET.S48" class="subsec">
<h6><a href="#sec-GET.S48" title="link to this subsection">S48</a></h6>
<p>Setting the value of the <var data-name="operationName">operationName</var> parameter to the empty string is equivalent to omitting the <var data-name="operationName">operationName</var> parameter.</p>
</section>
<section id="sec-GET.S49" class="subsec">
<h6><a href="#sec-GET.S49" title="link to this subsection">S49</a></h6>
<div id="note-3bc94" class="spec-note">
<a href="#note-3bc94">Note</a>
By the above, <code>operationName=null</code> represents an operation with the name <code>"null"</code> (such as <code>query null { __typename }</code>). If a literal <code>null</code> is desired, either omit <var data-name="operationName">operationName</var> or set it to the empty string.</div>
</section>
<section id="sec-GET.Example" secid="5.3.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-GET.Example">5.3.1</a></span>Example</h3>
<section id="sec-GET.Example.S50" class="subsec">
<h6><a href="#sec-GET.Example.S50" title="link to this subsection">S50</a></h6>
<p>If we wanted to execute the following GraphQL query:</p>
<pre id="example-25ae9" class="spec-example" data-language="graphql"><a href="#example-25ae9">Example № 6</a><code><span class="token keyword">query</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token property-query">user</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token property">name</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre>
<p>With the following query variables:</p>
<pre id="example-ece49" class="spec-example" data-language="json"><a href="#example-ece49">Example № 7</a><code><span class="token punctuation">{</span><span class="token property">"id"</span><span class="token operator">:</span><span class="token string">"QVBJcy5ndXJ1"</span><span class="token punctuation">}</span>
</code></pre>
<p>This request could be sent via an HTTP GET as follows:</p>
<pre id="example-3981e" class="spec-example" data-language="url"><a href="#example-3981e">Example № 8</a><code><span class="token scheme">http<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span><span class="token host">example.com</span></span><span class="token path"><span class="token path-separator">/</span>graphql</span><span class="token query"><span class="token query-delimiter">?</span><span class="token pair"><span class="token key">query</span>=<span class="token value">query(%24id%3A%20ID!)%7Buser(id%3A%24id)%7Bname%7D%7D</span></span><span class="token pair-delimiter">&amp;</span><span class="token pair"><span class="token key">variables</span>=<span class="token value">%7B%22id%22%3A%22QVBJcy5ndXJ1%22%7D</span></span></span>
</code></pre>
</section>
<section id="sec-GET.Example.S51" class="subsec">
<h6><a href="#sec-GET.Example.S51" title="link to this subsection">S51</a></h6>
<p>GET requests MUST NOT be used for executing mutation operations. If the values of <var data-name="query">query</var> and <var data-name="operationName">operationName</var> indicate that a mutation operation is to be executed, the server MUST respond with error status code <code>405</code> (Method Not Allowed) and halt execution. This restriction is necessary to conform with the long-established semantics of safe methods within HTTP.</p>
</section>
</section>
</section>
<section id="sec-POST" secid="5.4">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-POST">5.4</a></span>POST</h2>
<section id="sec-POST.S52" class="subsec">
<h6><a href="#sec-POST.S52" title="link to this subsection">S52</a></h6>
<p>A GraphQL POST request instructs the server to perform a query or mutation operation. A GraphQL POST request MUST have a body which contains values of the <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> parameters encoded in one of the officially recognized GraphQL media types, or another media type supported by the server.</p>
</section>
<section id="sec-POST.S53" class="subsec">
<h6><a href="#sec-POST.S53" title="link to this subsection">S53</a></h6>
<p>A client MUST indicate the media type of a request body using the <code>Content-Type</code> header as specified in <a href="https://datatracker.ietf.org/doc/html/rfc7231">RFC7231</a>.</p>
</section>
<section id="sec-POST.S54" class="subsec">
<h6><a href="#sec-POST.S54" title="link to this subsection">S54</a></h6>
<p>A server MUST support POST requests encoded with the <code>application/json</code> media type (as indicated by the <code>Content-Type</code> header) encoded with UTF-8.</p>
</section>
<section id="sec-POST.S55" class="subsec">
<h6><a href="#sec-POST.S55" title="link to this subsection">S55</a></h6>
<p>For POST requests using an officially recognized GraphQL <code>Content-Type</code> without indicating an encoding, the server MUST assume the encoding is <code>utf-8</code>.</p>
</section>
<section id="sec-POST.S56" class="subsec">
<h6><a href="#sec-POST.S56" title="link to this subsection">S56</a></h6>
<p>If the client does not supply a <code>Content-Type</code> header with a POST request, the server SHOULD reject the request using the appropriate <code>4xx</code> status code.</p>
</section>
<section id="sec-POST.S57" class="subsec">
<h6><a href="#sec-POST.S57" title="link to this subsection">S57</a></h6>
<div id="note-c83b4" class="spec-note">
<a href="#note-c83b4">Note</a>
Rejecting such requests encourages clients to supply a <code>Content-Type</code> header with every POST request. A server has the option to assume any media type they wish when none is supplied, with the understanding that parsing the request may fail.</div>
</section>
<section id="sec-POST.S58" class="subsec">
<h6><a href="#sec-POST.S58" title="link to this subsection">S58</a></h6>
<p>A server MAY support POST requests encoded with and/or accepting other media types or encodings.</p>
</section>
<section id="sec-POST.S59" class="subsec">
<h6><a href="#sec-POST.S59" title="link to this subsection">S59</a></h6>
<p>If a client does not know the media types the server supports then it SHOULD encode the request body in JSON (i.e. with <code>Content-Type: application/json</code>).</p>
</section>
<section id="sec-POST.S60" class="subsec">
<h6><a href="#sec-POST.S60" title="link to this subsection">S60</a></h6>
<div id="note-68b94" class="spec-note">
<a href="#note-68b94">Note</a>
Request encoding with media type <code>application/json</code> is supported by every compliant <span class="spec-ref"><a href="#server" data-name="server">server</a></span>.</div>
</section>
<section id="sec-JSON-Encoding" secid="5.4.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-JSON-Encoding">5.4.1</a></span>JSON Encoding</h3>
<section id="sec-JSON-Encoding.S61" class="subsec">
<h6><a href="#sec-JSON-Encoding.S61" title="link to this subsection">S61</a></h6>
<p>When encoded in JSON, a <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> is encoded as a JSON object (map), with the properties specified by the GraphQL-over-HTTP request:</p>
</section>
<section id="sec-JSON-Encoding.S62" class="subsec">
<h6><a href="#sec-JSON-Encoding.S62" title="link to this subsection">S62</a></h6>
<ul>
<li><var data-name="query">query</var> - the string representation of the Source Text of the Document as specified in <a href="https://spec.graphql.org/draft/#sec-Language">the Language section of the GraphQL specification</a>.</li>
</ul>
</section>
<section id="sec-JSON-Encoding.S63" class="subsec">
<h6><a href="#sec-JSON-Encoding.S63" title="link to this subsection">S63</a></h6>
<ul>
<li><var data-name="operationName">operationName</var> - an optional string</li>
</ul>
</section>
<section id="sec-JSON-Encoding.S64" class="subsec">
<h6><a href="#sec-JSON-Encoding.S64" title="link to this subsection">S64</a></h6>
<ul>
<li><var data-name="variables">variables</var> - an optional object (map), the keys of which are the variable names and the values of which are the variable values</li>
</ul>
</section>
<section id="sec-JSON-Encoding.S65" class="subsec">
<h6><a href="#sec-JSON-Encoding.S65" title="link to this subsection">S65</a></h6>
<ul>
<li><var data-name="extensions">extensions</var> - an optional object (map)</li>
</ul>
</section>
<section id="sec-JSON-Encoding.S66" class="subsec">
<h6><a href="#sec-JSON-Encoding.S66" title="link to this subsection">S66</a></h6>
<p>All other property names are reserved for future expansion; if implementors need to add additional information to a request they MUST do so via other means, the RECOMMENDED approach is to add an implementor-scoped entry to the <var data-name="extensions">extensions</var> object.</p>
</section>
</section>
<section id="sec-POST.Example" secid="5.4.2">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-POST.Example">5.4.2</a></span>Example</h3>
<section id="sec-POST.Example.S67" class="subsec">
<h6><a href="#sec-POST.Example.S67" title="link to this subsection">S67</a></h6>
<p>If we wanted to execute the following GraphQL query:</p>
<pre id="example-0b016" class="spec-example" data-language="graphql"><a href="#example-0b016">Example № 9</a><code><span class="token keyword">query</span> <span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">user</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>With the following query variables:</p>
<pre id="example-1dbeb" class="spec-example" data-language="json"><a href="#example-1dbeb">Example № 10</a><code><span class="token punctuation">{</span>
  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"QVBJcy5ndXJ1"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This request could be sent via an HTTP POST to the relevant URL using the JSON encoding with the headers:</p>
<pre id="example-00d32" class="spec-example" data-language="headers"><a href="#example-00d32">Example № 11</a><code>Content-Type: application/json
Accept: application/graphql-response+json
</code></pre>
<p>And the body:</p>
<pre id="example-2db31" class="spec-example" data-language="json"><a href="#example-2db31">Example № 12</a><code><span class="token punctuation">{</span>
  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"query ($id: ID!) {\n  user(id: $id) {\n    name\n  }\n}"</span><span class="token punctuation">,</span>
  <span class="token property">"variables"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"QVBJcy5ndXJ1"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="sec-Response" secid="6">
<h1><span class="spec-secid" title="link to this section"><a href="#sec-Response">6</a></span>Response</h1>
<section id="sec-Response.S68" class="subsec">
<h6><a href="#sec-Response.S68" title="link to this subsection">S68</a></h6>
<p>When a server receives a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span>, it must return a well‐formed <em>GraphQL response</em>. The server&rsquo;s response describes the result of validating and executing the requested operation if successful, and describes any errors encountered during the request.</p>
</section>
<section id="sec-Response.S69" class="subsec">
<h6><a href="#sec-Response.S69" title="link to this subsection">S69</a></h6>
<p>A server must comply with <a href="https://datatracker.ietf.org/doc/html/rfc7231">RFC7231</a>.</p>
</section>
<section id="sec-Body" secid="6.1">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Body">6.1</a></span>Body</h2>
<section id="sec-Body.S70" class="subsec">
<h6><a href="#sec-Body.S70" title="link to this subsection">S70</a></h6>
<p>The body of the server&rsquo;s response MUST follow the requirements for a <a href="#sec-Response">GraphQL response</a>, encoded directly in the chosen media type.</p>
</section>
<section id="sec-Body.S71" class="subsec">
<h6><a href="#sec-Body.S71" title="link to this subsection">S71</a></h6>
<p>A server MUST indicate the media type of the response with a <code>Content-Type</code> header, and SHOULD indicate the encoding (e.g. <code>application/graphql-response+json; charset=utf-8</code>).</p>
</section>
<section id="sec-Body.S72" class="subsec">
<h6><a href="#sec-Body.S72" title="link to this subsection">S72</a></h6>
<p>If an <code>Accept</code> header is provided, the server MUST respect the given <code>Accept</code> header and attempt to encode the response in the highest priority media type listed that is supported by the server.</p>
</section>
<section id="sec-Body.S73" class="subsec">
<h6><a href="#sec-Body.S73" title="link to this subsection">S73</a></h6>
<p>In alignment with the <a href="https://tools.ietf.org/html/rfc7231#section-5.3.2">HTTP 1.1 Accept</a> specification, when a client does not include at least one supported media type in the <code>Accept</code> HTTP header, the server MUST either:</p>
<ol>
<li>Respond with a <code>406 Not Acceptable</code> status code and stop processing the request (RECOMMENDED); OR</li>
<li>Disregard the <code>Accept</code> header and respond with the server&rsquo;s choice of media type (NOT RECOMMENDED).</li>
</ol>
</section>
<section id="sec-Body.S74" class="subsec">
<h6><a href="#sec-Body.S74" title="link to this subsection">S74</a></h6>
<div id="note-9235c" class="spec-note">
<a href="#note-9235c">Note</a>
It is unlikely that a client can process a response that does not match one of the media types it has requested, hence <code>406 Not Acceptable</code> being the recommended response. However, the server authors may know better about the specific clients consuming their endpoint, thus both approaches are permitted.</div>
</section>
<section id="sec-Body.S75" class="subsec">
<h6><a href="#sec-Body.S75" title="link to this subsection">S75</a></h6>
<p>A server MUST support any <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> which accepts the <code>application/json</code> media type (as indicated by the <code>Accept</code> header).</p>
</section>
<section id="sec-Body.S76" class="subsec">
<h6><a href="#sec-Body.S76" title="link to this subsection">S76</a></h6>
<p>A server SHOULD support any <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> which accepts the <code>application/graphql-response+json</code> media type (as indicated by the <code>Accept</code> header).</p>
</section>
<section id="sec-Body.S77" class="subsec">
<h6><a href="#sec-Body.S77" title="link to this subsection">S77</a></h6>
<div id="note-e4cb5" class="spec-note">
<a href="#note-e4cb5">Note</a>
Prior to this specification, the media type <code>application/json</code> was in wide use for the HTTP response payload type. Unfortunately this means clients cannot trust responses from the server that do not use an HTTP 2xx status code (since these replies may come from non-compliant HTTP servers or proxies somewhere in the request chain). For this reason, this specification introduces the <code>application/graphql-response+json</code> media type on responses; however, to give existing servers time to move over, it is not required to be supported until 1st January 2025.</div>
</section>
<section id="sec-Legacy-watershed" secid="6.1.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-Legacy-watershed">6.1.1</a></span>Legacy watershed</h3>
<section id="sec-Legacy-watershed.S78" class="subsec">
<h6><a href="#sec-Legacy-watershed.S78" title="link to this subsection">S78</a></h6>
<p>From 1st January 2025 (<code>2025-01-01T00:00:00Z</code>), a server MUST support any <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> which accepts the <code>application/graphql-response+json</code> media type (as indicated by the <code>Accept</code> header) using the UTF-8 encoding.</p>
</section>
<section id="sec-Legacy-watershed.S79" class="subsec">
<h6><a href="#sec-Legacy-watershed.S79" title="link to this subsection">S79</a></h6>
<p>Before 1st January 2025 (<code>2025-01-01T00:00:00Z</code>), if the client does not supply an <code>Accept</code> header, the server SHOULD treat the <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> as if it had <code>Accept: application/json</code>. From 1st January 2025 (<code>2025-01-01T00:00:00Z</code>), if the client does not supply an <code>Accept</code> header, the server SHOULD treat the <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> as if it had <code>Accept: application/graphql-response+json</code>.</p>
</section>
<section id="sec-Legacy-watershed.S80" class="subsec">
<h6><a href="#sec-Legacy-watershed.S80" title="link to this subsection">S80</a></h6>
<div id="note-39865" class="spec-note">
<a href="#note-39865">Note</a>
This default is in place to maintain compatibility with legacy clients.</div>
</section>
</section>
</section>
<section id="sec-Validation" secid="6.2">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Validation">6.2</a></span>Validation</h2>
<section id="sec-Validation.S81" class="subsec">
<h6><a href="#sec-Validation.S81" title="link to this subsection">S81</a></h6>
<p>Validation of a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> SHOULD apply all the <a href="https://spec.graphql.org/draft/#sec-Validation">validation rules</a> specified by the GraphQL specification.</p>
</section>
<section id="sec-Validation.S82" class="subsec">
<h6><a href="#sec-Validation.S82" title="link to this subsection">S82</a></h6>
<p>The server MAY, at its discretion, apply additional validation rules.</p>
</section>
<section id="sec-Validation.S83" class="subsec">
<h6><a href="#sec-Validation.S83" title="link to this subsection">S83</a></h6>
<div id="note-3a398" class="spec-note">
<a href="#note-3a398">Note</a>
Examples of additional validation rules the server may apply include depth limit, complexity limit, etc.</div>
</section>
</section>
<section id="sec-Execution" secid="6.3">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Execution">6.3</a></span>Execution</h2>
<section id="sec-Execution.S84" class="subsec">
<h6><a href="#sec-Execution.S84" title="link to this subsection">S84</a></h6>
<p>Execution of a <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> follows <a href="https://spec.graphql.org/draft/#ExecuteRequest()">GraphQL&rsquo;s ExecuteRequest()</a> algorithm.</p>
</section>
<section id="sec-Execution.S85" class="subsec">
<h6><a href="#sec-Execution.S85" title="link to this subsection">S85</a></h6>
<div id="note-c1b3e" class="spec-note">
<a href="#note-c1b3e">Note</a>
In general, a <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> that does not pass validation should not be executed; however in certain circumstances, for example persisted operations that were previously known to be valid, the server may attempt execution regardless of validation errors.</div>
</section>
</section>
<section id="sec-Status-Codes" secid="6.4">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Status-Codes">6.4</a></span>Status Codes</h2>
<section id="sec-Status-Codes.S86" class="subsec">
<h6><a href="#sec-Status-Codes.S86" title="link to this subsection">S86</a></h6>
<p>In case of errors that completely prevent the generation of a well-formed <em>GraphQL response</em>, the server SHOULD respond with the appropriate status code depending on the concrete error condition, and MUST NOT respond with a <code>2xx</code> status code when using the <code>application/graphql-response+json</code> media type.</p>
</section>
<section id="sec-Status-Codes.S87" class="subsec">
<h6><a href="#sec-Status-Codes.S87" title="link to this subsection">S87</a></h6>
<div id="note-76cc0" class="spec-note">
<a href="#note-76cc0">Note</a>
Typically the appropriate status code will be <code>400</code> (Bad Request).</div>
</section>
<section id="sec-Status-Codes.S88" class="subsec">
<h6><a href="#sec-Status-Codes.S88" title="link to this subsection">S88</a></h6>
<div id="note-1a975" class="spec-note">
<a href="#note-1a975">Note</a>
This rule is &ldquo;should&rdquo; to maintain compatibility with legacy servers which can return 200 status codes even when this type of error occurs, but only when not using the <code>application/graphql-response+json</code> media type.</div>
</section>
<section id="sec-Status-Codes.S89" class="subsec">
<h6><a href="#sec-Status-Codes.S89" title="link to this subsection">S89</a></h6>
<p>Otherwise, the status codes depends on the media type with which the GraphQL response will be served:</p>
</section>
<section id="sec-application-json" secid="6.4.1">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-application-json">6.4.1</a></span>application/json</h3>
<section id="sec-application-json.S90" class="subsec">
<h6><a href="#sec-application-json.S90" title="link to this subsection">S90</a></h6>
<p>This section only applies when the response body is to use the <code>application/json</code> media type.</p>
</section>
<section id="sec-application-json.S91" class="subsec">
<h6><a href="#sec-application-json.S91" title="link to this subsection">S91</a></h6>
<p>The server SHOULD use the <code>200</code> status code for every response to a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span>, independent of any <em>GraphQL request error</em> or <em>GraphQL field error</em> raised.</p>
</section>
<section id="sec-application-json.S92" class="subsec">
<h6><a href="#sec-application-json.S92" title="link to this subsection">S92</a></h6>
<div id="note-ba11a" class="spec-note">
<a href="#note-ba11a">Note</a>
A status code in the <code>4xx</code> or <code>5xx</code> ranges or status code <code>203</code> (and maybe others) could originate from intermediary servers; since the client cannot determine if an <code>application/json</code> response with arbitrary status code is a well-formed <em>GraphQL response</em> (because it cannot trust the source) the server must use <code>200</code> status code to guarantee to the client that the response has not been generated or modified by an intermediary.</div>
</section>
<section id="sec-application-json.S93" class="subsec">
<h6><a href="#sec-application-json.S93" title="link to this subsection">S93</a></h6>
<p>If the <em>GraphQL response</em> contains a non-null <var data-name="data">data</var> entry then the server MUST use the <code>200</code> status code.</p>
</section>
<section id="sec-application-json.S94" class="subsec">
<h6><a href="#sec-application-json.S94" title="link to this subsection">S94</a></h6>
<div id="note-5c044" class="spec-note">
<a href="#note-5c044">Note</a>
This indicates that no <em>GraphQL request error</em> was raised, though one or more <em>GraphQL field error</em> may have been raised this is still a successful execution &ndash; see &ldquo;partial response&rdquo; in the GraphQL specification.</div>
</section>
<section id="sec-application-json.S95" class="subsec">
<h6><a href="#sec-application-json.S95" title="link to this subsection">S95</a></h6>
<p>The server SHOULD NOT use a <code>4xx</code> or <code>5xx</code> status code for a response to a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span>.</p>
</section>
<section id="sec-application-json.S96" class="subsec">
<h6><a href="#sec-application-json.S96" title="link to this subsection">S96</a></h6>
<div id="note-bd325" class="spec-note">
<a href="#note-bd325">Note</a>
For compatibility with legacy servers, this specification allows the use of <code>4xx</code> or <code>5xx</code> status codes for a failed well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> where the response uses the <code>application/json</code> media type, but it is strongly discouraged. To use <code>4xx</code> and <code>5xx</code> status codes in these situations, please use the <code>application/graphql-response+json</code> media type.</div>
</section>
<section id="sec-application-json.S97" class="subsec">
<h6><a href="#sec-application-json.S97" title="link to this subsection">S97</a></h6>
<p>If the URL is not used for other purposes, the server SHOULD use a <code>4xx</code> status code to respond to a request that is not a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span>.</p>
</section>
<section id="sec-application-json.S98" class="subsec">
<h6><a href="#sec-application-json.S98" title="link to this subsection">S98</a></h6>
<div id="note-aa01e" class="spec-note">
<a href="#note-aa01e">Note</a>
For compatibility with legacy servers, this specification allows the use of <code>2xx</code> or <code>5xx</code> status codes when responding to invalid requests using the <code>application/json</code> media type, but it is strongly discouraged.</div>
</section>
<section id="sec-application-json.S99" class="subsec">
<h6><a href="#sec-application-json.S99" title="link to this subsection">S99</a></h6>
<div id="note-20fe1" class="spec-note">
<a href="#note-20fe1">Note</a>
URLs that enable GraphQL requests may enable other types of requests &ndash; see the <a href="#url">URL</a> section.</div>
</section>
<section id="sec-application-json.Examples" secid="6.4.1.1">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-application-json.Examples">6.4.1.1</a></span>Examples</h4>
<section id="sec-application-json.Examples.S100" class="subsec">
<h6><a href="#sec-application-json.Examples.S100" title="link to this subsection">S100</a></h6>
<p>The following examples provide guidance on how to deal with specific error cases when using the <code>application/json</code> media type to encode the response body:</p>
</section>
<section id="sec-application-json.Examples.JSON-parsing-failure" secid="6.4.1.1.1">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-json.Examples.JSON-parsing-failure">6.4.1.1.1</a></span>JSON parsing failure</h5>
<section id="sec-application-json.Examples.JSON-parsing-failure.S101" class="subsec">
<h6><a href="#sec-application-json.Examples.JSON-parsing-failure.S101" title="link to this subsection">S101</a></h6>
<p>For example a POST request body of <code>NONSENSE</code> or <code>{"query":</code> (note: invalid JSON).</p>
</section>
<section id="sec-application-json.Examples.JSON-parsing-failure.S102" class="subsec">
<h6><a href="#sec-application-json.Examples.JSON-parsing-failure.S102" title="link to this subsection">S102</a></h6>
<p>Requests that the server cannot interpret SHOULD result in status code <code>400</code> (Bad Request).</p>
</section>
</section>
<section id="sec-application-json.Examples.Invalid-parameters" secid="6.4.1.1.2">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-json.Examples.Invalid-parameters">6.4.1.1.2</a></span>Invalid parameters</h5>
<section id="sec-application-json.Examples.Invalid-parameters.S103" class="subsec">
<h6><a href="#sec-application-json.Examples.Invalid-parameters.S103" title="link to this subsection">S103</a></h6>
<p>For example a POST request body of <code>{"qeury": "{__typename}"}</code> (note: typo) or <code>{"query": "query Q ($i:Int!) { q(i: $i) }", "variables": [7]}</code> (note: invalid shape for <code>variables</code>).</p>
<p>A request that does not constitute a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> SHOULD result in status code <code>400</code> (Bad Request).</p>
</section>
</section>
<section id="sec-application-json.Examples.Document-parsing-failure" secid="6.4.1.1.3">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-json.Examples.Document-parsing-failure">6.4.1.1.3</a></span>Document parsing failure</h5>
<section id="sec-application-json.Examples.Document-parsing-failure.S104" class="subsec">
<h6><a href="#sec-application-json.Examples.Document-parsing-failure.S104" title="link to this subsection">S104</a></h6>
<p>For example a POST request body of <code>{"query": "{"}</code>.</p>
<p>Requests where the <em>GraphQL document</em> cannot be parsed SHOULD result in status code <code>200</code> (Okay).</p>
</section>
</section>
<section id="sec-application-json.Examples.Document-validation-failure" secid="6.4.1.1.4">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-json.Examples.Document-validation-failure">6.4.1.1.4</a></span>Document validation failure</h5>
<section id="sec-application-json.Examples.Document-validation-failure.S105" class="subsec">
<h6><a href="#sec-application-json.Examples.Document-validation-failure.S105" title="link to this subsection">S105</a></h6>
<p>Requests that fail to pass <em>GraphQL validation</em>, the server SHOULD NOT execute the request and SHOULD return a status code of <code>200</code> (Okay).</p>
</section>
</section>
<section id="sec-application-json.Examples.Operation-cannot-be-determined" secid="6.4.1.1.5">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-json.Examples.Operation-cannot-be-determined">6.4.1.1.5</a></span>Operation cannot be determined</h5>
<section id="sec-application-json.Examples.Operation-cannot-be-determined.S106" class="subsec">
<h6><a href="#sec-application-json.Examples.Operation-cannot-be-determined.S106" title="link to this subsection">S106</a></h6>
<p>If <a href="https://spec.graphql.org/draft/#GetOperation()">GetOperation()</a> raises a <em>GraphQL request error</em>, the server SHOULD NOT execute the request and SHOULD return a status code of <code>200</code> (Okay).</p>
</section>
</section>
<section id="sec-application-json.Examples.Variable-coercion-failure" secid="6.4.1.1.6">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-json.Examples.Variable-coercion-failure">6.4.1.1.6</a></span>Variable coercion failure</h5>
<section id="sec-application-json.Examples.Variable-coercion-failure.S107" class="subsec">
<h6><a href="#sec-application-json.Examples.Variable-coercion-failure.S107" title="link to this subsection">S107</a></h6>
<p>If <a href="https://spec.graphql.org/draft/#CoerceVariableValues()">CoerceVariableValues()</a> raises a <em>GraphQL request error</em>, the server SHOULD NOT execute the request and SHOULD return a status code of <code>200</code> (Okay).</p>
</section>
<section id="sec-application-json.Examples.Variable-coercion-failure.S108" class="subsec">
<h6><a href="#sec-application-json.Examples.Variable-coercion-failure.S108" title="link to this subsection">S108</a></h6>
<p>For example the well-formed GraphQL-over-HTTP request:</p>
<pre data-language="json"><code><span class="token punctuation">{</span>
  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"query getItemName($id: ID!) { item(id: $id) { id name } }"</span><span class="token punctuation">,</span>
  <span class="token property">"variables"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">"id"</span><span class="token operator">:</span> <span class="token null keyword">null</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>would fail variable coercion as the value for <code>id</code> would fail to satisfy the query document&rsquo;s expectation that <code>id</code> is non-null.</p>
</section>
</section>
<section id="sec-application-json.Examples.Field-errors-encountered-during-execution" secid="6.4.1.1.7">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-json.Examples.Field-errors-encountered-during-execution">6.4.1.1.7</a></span>Field errors encountered during execution</h5>
<section id="sec-application-json.Examples.Field-errors-encountered-during-execution.S109" class="subsec">
<h6><a href="#sec-application-json.Examples.Field-errors-encountered-during-execution.S109" title="link to this subsection">S109</a></h6>
<p>If the operation is executed and no <em>GraphQL request error</em> is raised then the server SHOULD respond with a status code of <code>200</code> (Okay). This is the case even if a <em>GraphQL field error</em> is raised during <a href="https://spec.graphql.org/draft/#ExecuteQuery()">GraphQL&rsquo;s ExecuteQuery()</a> or <a href="https://spec.graphql.org/draft/#ExecuteMutation()">GraphQL&rsquo;s ExecuteMutation()</a>.</p>
</section>
</section>
</section>
</section>
<section id="sec-application-graphql-response-json" secid="6.4.2">
<h3><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json">6.4.2</a></span>application/graphql-response+json</h3>
<section id="sec-application-graphql-response-json.S110" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S110" title="link to this subsection">S110</a></h6>
<p>This section only applies when the response body is to use the <code>application/graphql-response+json</code> media type.</p>
</section>
<section id="sec-application-graphql-response-json.S111" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S111" title="link to this subsection">S111</a></h6>
<p>If the <em>GraphQL response</em> contains the <var data-name="data">data</var> entry and it is not <span class="spec-keyword">null</span>, then the server MUST reply with a <code>2xx</code> status code and SHOULD reply with <code>200</code> status code.</p>
</section>
<section id="sec-application-graphql-response-json.S112" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S112" title="link to this subsection">S112</a></h6>
<div id="note-91143" class="spec-note">
<a href="#note-91143">Note</a>
The result of executing a GraphQL operation may contain partial data as well as encountered errors. Errors that happen during execution of the GraphQL operation typically become part of the result, as long as the server is still able to produce a well-formed <em>GraphQL response</em>. There&rsquo;s currently not an approved HTTP status code to use for a &ldquo;partial response,&rdquo; contenders include WebDAV&rsquo;s status code &ldquo;207 Multi-Status&rdquo; and using a custom code such as &ldquo;247 Partial Success.&rdquo; <a href="https://datatracker.ietf.org/doc/html/rfc2616#section-6.1.1">IETF RFC2616 Section 6.1.1</a> states &ldquo;codes are fully defined in section 10&rdquo; implying that though more codes are expected to be supported over time, valid codes must be present in this document.</div>
</section>
<section id="sec-application-graphql-response-json.S113" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S113" title="link to this subsection">S113</a></h6>
<p>If the <em>GraphQL response</em> contains the <var data-name="data">data</var> entry and it is <span class="spec-keyword">null</span>, then the server SHOULD reply with a <code>2xx</code> status code and it is RECOMMENDED it replies with <code>200</code> status code.</p>
</section>
<section id="sec-application-graphql-response-json.S114" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S114" title="link to this subsection">S114</a></h6>
<div id="note-f503e" class="spec-note">
<a href="#note-f503e">Note</a>
Using <code>4xx</code> and <code>5xx</code> status codes in this situation is not recommended &ndash; since no <em>GraphQL request error</em> has occurred it is seen as a &ldquo;partial response&rdquo;.</div>
</section>
<section id="sec-application-graphql-response-json.S115" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S115" title="link to this subsection">S115</a></h6>
<p>If the <em>GraphQL response</em> does not contain the <var data-name="data">data</var> entry then the server MUST reply with a <code>4xx</code> or <code>5xx</code> status code as appropriate.</p>
</section>
<section id="sec-application-graphql-response-json.S116" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S116" title="link to this subsection">S116</a></h6>
<div id="note-d3730" class="spec-note">
<a href="#note-d3730">Note</a>
The GraphQL specification indicates that the only situation in which the <em>GraphQL response</em> does not include the <var data-name="data">data</var> entry is one in which the <var data-name="errors">errors</var> entry is populated.</div>
</section>
<section id="sec-application-graphql-response-json.S117" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S117" title="link to this subsection">S117</a></h6>
<p>If the request is not a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span>, or it does not pass validation, then the server SHOULD reply with <code>400</code> status code.</p>
</section>
<section id="sec-application-graphql-response-json.S118" class="subsec">
<h6><a href="#sec-application-graphql-response-json.S118" title="link to this subsection">S118</a></h6>
<p>If the client is not permitted to issue the GraphQL request then the server SHOULD reply with <code>403</code>, <code>401</code> or similar appropriate status code.</p>
</section>
<section id="sec-application-graphql-response-json.Examples" secid="6.4.2.1">
<h4><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json.Examples">6.4.2.1</a></span>Examples</h4>
<section id="sec-application-graphql-response-json.Examples.S119" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.S119" title="link to this subsection">S119</a></h6>
<p>The following examples provide guidance on how to deal with specific error cases when using the <code>application/graphql-response+json</code> media type to encode the response body:</p>
</section>
<section id="sec-application-graphql-response-json.Examples.JSON-parsing-failure" secid="6.4.2.1.1">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json.Examples.JSON-parsing-failure">6.4.2.1.1</a></span>JSON parsing failure</h5>
<section id="sec-application-graphql-response-json.Examples.JSON-parsing-failure.S120" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.JSON-parsing-failure.S120" title="link to this subsection">S120</a></h6>
<p>For example a POST request body of <code>NONSENSE</code> or <code>{"query":</code> (note: invalid JSON).</p>
<p>Requests that the server cannot interpret should result in status code <code>400</code> (Bad Request).</p>
</section>
</section>
<section id="sec-application-graphql-response-json.Examples.Invalid-parameters" secid="6.4.2.1.2">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json.Examples.Invalid-parameters">6.4.2.1.2</a></span>Invalid parameters</h5>
<section id="sec-application-graphql-response-json.Examples.Invalid-parameters.S121" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.Invalid-parameters.S121" title="link to this subsection">S121</a></h6>
<p>For example a POST request body of <code>{"qeury": "{__typename}"}</code> (note: typo) or <code>{"query": "query Q ($i:Int!) { q(i: $i) }", "variables": [7]}</code> (note: invalid shape for <code>variables</code>).</p>
<p>A request that does not constitute a well-formed <span class="spec-ref"><a href="#graphql-over-http-request" data-name="graphql-over-http-request">GraphQL-over-HTTP request</a></span> SHOULD result in status code <code>400</code> (Bad Request).</p>
</section>
</section>
<section id="sec-application-graphql-response-json.Examples.Document-parsing-failure" secid="6.4.2.1.3">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json.Examples.Document-parsing-failure">6.4.2.1.3</a></span>Document parsing failure</h5>
<section id="sec-application-graphql-response-json.Examples.Document-parsing-failure.S122" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.Document-parsing-failure.S122" title="link to this subsection">S122</a></h6>
<p>For example a POST request body of <code>{"query": "{"}</code>.</p>
<p>Requests where the <em>GraphQL document</em> cannot be parsed should result in status code <code>400</code> (Bad Request).</p>
</section>
</section>
<section id="sec-application-graphql-response-json.Examples.Document-validation-failure" secid="6.4.2.1.4">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json.Examples.Document-validation-failure">6.4.2.1.4</a></span>Document validation failure</h5>
<section id="sec-application-graphql-response-json.Examples.Document-validation-failure.S123" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.Document-validation-failure.S123" title="link to this subsection">S123</a></h6>
<p>Requests that fail to pass <em>GraphQL validation</em> SHOULD be denied execution with a status code of <code>400</code> (Bad Request).</p>
</section>
</section>
<section id="sec-application-graphql-response-json.Examples.Operation-cannot-be-determined" secid="6.4.2.1.5">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json.Examples.Operation-cannot-be-determined">6.4.2.1.5</a></span>Operation cannot be determined</h5>
<section id="sec-application-graphql-response-json.Examples.Operation-cannot-be-determined.S124" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.Operation-cannot-be-determined.S124" title="link to this subsection">S124</a></h6>
<p>If <a href="https://spec.graphql.org/draft/#GetOperation()">GetOperation()</a> raises a <em>GraphQL request error</em>, the server SHOULD NOT execute the request and SHOULD return a status code of <code>400</code> (Bad Request).</p>
</section>
</section>
<section id="sec-application-graphql-response-json.Examples.Variable-coercion-failure" secid="6.4.2.1.6">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json.Examples.Variable-coercion-failure">6.4.2.1.6</a></span>Variable coercion failure</h5>
<section id="sec-application-graphql-response-json.Examples.Variable-coercion-failure.S125" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.Variable-coercion-failure.S125" title="link to this subsection">S125</a></h6>
<p>If <a href="https://spec.graphql.org/draft/#CoerceVariableValues()">CoerceVariableValues()</a> raises a <em>GraphQL request error</em>, the server SHOULD NOT execute the request and SHOULD return a status code of <code>400</code> (Bad Request).</p>
</section>
</section>
<section id="sec-application-graphql-response-json.Examples.Field-errors-encountered-during-execution" secid="6.4.2.1.7">
<h5><span class="spec-secid" title="link to this section"><a href="#sec-application-graphql-response-json.Examples.Field-errors-encountered-during-execution">6.4.2.1.7</a></span>Field errors encountered during execution</h5>
<section id="sec-application-graphql-response-json.Examples.Field-errors-encountered-during-execution.S126" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.Field-errors-encountered-during-execution.S126" title="link to this subsection">S126</a></h6>
<p>If the operation is executed and no <em>GraphQL request error</em> is raised then the server SHOULD respond with a status code of <code>200</code> (Okay). This is the case even if a <em>GraphQL field error</em> is raised during <a href="https://spec.graphql.org/draft/#ExecuteQuery()">GraphQL&rsquo;s ExecuteQuery()</a> or <a href="https://spec.graphql.org/draft/#ExecuteMutation()">GraphQL&rsquo;s ExecuteMutation()</a>.</p>
</section>
<section id="sec-application-graphql-response-json.Examples.Field-errors-encountered-during-execution.S127" class="subsec">
<h6><a href="#sec-application-graphql-response-json.Examples.Field-errors-encountered-during-execution.S127" title="link to this subsection">S127</a></h6>
<div id="note-0fbe1" class="spec-note">
<a href="#note-0fbe1">Note</a>
The GraphQL specification <a href="https://spec.graphql.org/draft/#sec-Handling-Field-Errors">differentiates field errors from request errors</a> and refers to the situation wherein a <em>GraphQL field error</em> occurs as a partial response; it still indicates successful execution.</div>
</section>
</section>
</section>
</section>
</section>
<section id="sec-Processing-the-response" secid="6.5">
<h2><span class="spec-secid" title="link to this section"><a href="#sec-Processing-the-response">6.5</a></span>Processing the response</h2>
<section id="sec-Processing-the-response.S128" class="subsec">
<h6><a href="#sec-Processing-the-response.S128" title="link to this subsection">S128</a></h6>
<p>If the response uses a non-<code>200</code> status code and the media type of the response payload is <code>application/json</code> then the client MUST NOT rely on the body to be a well-formed <em>GraphQL response</em> since the source of the response may not be the server but instead some intermediary such as API gateways, proxies, firewalls, etc. </p>
</section>
</section>
</section>
<section id="index" secid="index" class="spec-index">
<h1>
<span class="spec-secid" title="link to the index"><a href="#index">§</a></span>Index</h1>
<ol>
<li><a href="#client">client</a></li>
<li><a href="#graphql-over-http-request">GraphQL-over-HTTP request</a></li>
<li><a href="#server">server</a></li>
</ol>
</section>
</article>
<footer>
Written in <a href="https://spec-md.com" target="_blank">Spec Markdown</a>.</footer>
<input hidden class="spec-sidebar-toggle" type="checkbox" id="spec-sidebar-toggle" aria-hidden /><label for="spec-sidebar-toggle" aria-hidden><div class="spec-sidebar-button">&#x2630;</div></label>
<div class="spec-sidebar" aria-hidden>
<div class="spec-toc">
<div class="title"><a href="#">GraphQL Over HTTP</a></div>
<ol><li id="_sidebar_1"><a href="#sec-GraphQL-over-HTTP"><span class="spec-secid">1</span>GraphQL over HTTP</a></li>
<li id="_sidebar_2"><a href="#sec-Overview"><span class="spec-secid">2</span>Overview</a></li>
<li id="_sidebar_3"><a href="#sec-URL"><span class="spec-secid">3</span>URL</a></li>
<li id="_sidebar_4"><a href="#sec-Serialization-Format"><span class="spec-secid">4</span>Serialization Format</a>
<input hidden class="toggle" type="checkbox" id="_toggle_4" /><label for="_toggle_4"></label>
<ol>
<li id="_sidebar_4.1"><a href="#sec-Media-Types"><span class="spec-secid">4.1</span>Media Types</a></li>
</ol>
</li>
<li id="_sidebar_5"><a href="#sec-Request"><span class="spec-secid">5</span>Request</a>
<input hidden class="toggle" type="checkbox" id="_toggle_5" /><label for="_toggle_5"></label>
<ol>
<li id="_sidebar_5.1"><a href="#sec-Request-Parameters"><span class="spec-secid">5.1</span>Request Parameters</a></li>
<li id="_sidebar_5.2"><a href="#sec-Accept"><span class="spec-secid">5.2</span>Accept</a>
<input hidden class="toggle" type="checkbox" id="_toggle_5.2" /><label for="_toggle_5.2"></label>
<ol>
<li id="_sidebar_5.2.1"><a href="#sec-Legacy-Watershed"><span class="spec-secid">5.2.1</span>Legacy Watershed</a></li>
</ol>
</li>
<li id="_sidebar_5.3"><a href="#sec-GET"><span class="spec-secid">5.3</span>GET</a>
<input hidden class="toggle" type="checkbox" id="_toggle_5.3" /><label for="_toggle_5.3"></label>
<ol>
<li id="_sidebar_5.3.1"><a href="#sec-GET.Example"><span class="spec-secid">5.3.1</span>Example</a></li>
</ol>
</li>
<li id="_sidebar_5.4"><a href="#sec-POST"><span class="spec-secid">5.4</span>POST</a>
<input hidden class="toggle" type="checkbox" id="_toggle_5.4" /><label for="_toggle_5.4"></label>
<ol>
<li id="_sidebar_5.4.1"><a href="#sec-JSON-Encoding"><span class="spec-secid">5.4.1</span>JSON Encoding</a></li>
<li id="_sidebar_5.4.2"><a href="#sec-POST.Example"><span class="spec-secid">5.4.2</span>Example</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_6"><a href="#sec-Response"><span class="spec-secid">6</span>Response</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6" /><label for="_toggle_6"></label>
<ol>
<li id="_sidebar_6.1"><a href="#sec-Body"><span class="spec-secid">6.1</span>Body</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.1" /><label for="_toggle_6.1"></label>
<ol>
<li id="_sidebar_6.1.1"><a href="#sec-Legacy-watershed"><span class="spec-secid">6.1.1</span>Legacy watershed</a></li>
</ol>
</li>
<li id="_sidebar_6.2"><a href="#sec-Validation"><span class="spec-secid">6.2</span>Validation</a></li>
<li id="_sidebar_6.3"><a href="#sec-Execution"><span class="spec-secid">6.3</span>Execution</a></li>
<li id="_sidebar_6.4"><a href="#sec-Status-Codes"><span class="spec-secid">6.4</span>Status Codes</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.4" /><label for="_toggle_6.4"></label>
<ol>
<li id="_sidebar_6.4.1"><a href="#sec-application-json"><span class="spec-secid">6.4.1</span>application/json</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.4.1" /><label for="_toggle_6.4.1"></label>
<ol>
<li id="_sidebar_6.4.1.1"><a href="#sec-application-json.Examples"><span class="spec-secid">6.4.1.1</span>Examples</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.4.1.1" /><label for="_toggle_6.4.1.1"></label>
<ol>
<li id="_sidebar_6.4.1.1.1"><a href="#sec-application-json.Examples.JSON-parsing-failure"><span class="spec-secid">6.4.1.1.1</span>JSON parsing failure</a></li>
<li id="_sidebar_6.4.1.1.2"><a href="#sec-application-json.Examples.Invalid-parameters"><span class="spec-secid">6.4.1.1.2</span>Invalid parameters</a></li>
<li id="_sidebar_6.4.1.1.3"><a href="#sec-application-json.Examples.Document-parsing-failure"><span class="spec-secid">6.4.1.1.3</span>Document parsing failure</a></li>
<li id="_sidebar_6.4.1.1.4"><a href="#sec-application-json.Examples.Document-validation-failure"><span class="spec-secid">6.4.1.1.4</span>Document validation failure</a></li>
<li id="_sidebar_6.4.1.1.5"><a href="#sec-application-json.Examples.Operation-cannot-be-determined"><span class="spec-secid">6.4.1.1.5</span>Operation cannot be determined</a></li>
<li id="_sidebar_6.4.1.1.6"><a href="#sec-application-json.Examples.Variable-coercion-failure"><span class="spec-secid">6.4.1.1.6</span>Variable coercion failure</a></li>
<li id="_sidebar_6.4.1.1.7"><a href="#sec-application-json.Examples.Field-errors-encountered-during-execution"><span class="spec-secid">6.4.1.1.7</span>Field errors encountered during execution</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_6.4.2"><a href="#sec-application-graphql-response-json"><span class="spec-secid">6.4.2</span>application/graphql-response+json</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.4.2" /><label for="_toggle_6.4.2"></label>
<ol>
<li id="_sidebar_6.4.2.1"><a href="#sec-application-graphql-response-json.Examples"><span class="spec-secid">6.4.2.1</span>Examples</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.4.2.1" /><label for="_toggle_6.4.2.1"></label>
<ol>
<li id="_sidebar_6.4.2.1.1"><a href="#sec-application-graphql-response-json.Examples.JSON-parsing-failure"><span class="spec-secid">6.4.2.1.1</span>JSON parsing failure</a></li>
<li id="_sidebar_6.4.2.1.2"><a href="#sec-application-graphql-response-json.Examples.Invalid-parameters"><span class="spec-secid">6.4.2.1.2</span>Invalid parameters</a></li>
<li id="_sidebar_6.4.2.1.3"><a href="#sec-application-graphql-response-json.Examples.Document-parsing-failure"><span class="spec-secid">6.4.2.1.3</span>Document parsing failure</a></li>
<li id="_sidebar_6.4.2.1.4"><a href="#sec-application-graphql-response-json.Examples.Document-validation-failure"><span class="spec-secid">6.4.2.1.4</span>Document validation failure</a></li>
<li id="_sidebar_6.4.2.1.5"><a href="#sec-application-graphql-response-json.Examples.Operation-cannot-be-determined"><span class="spec-secid">6.4.2.1.5</span>Operation cannot be determined</a></li>
<li id="_sidebar_6.4.2.1.6"><a href="#sec-application-graphql-response-json.Examples.Variable-coercion-failure"><span class="spec-secid">6.4.2.1.6</span>Variable coercion failure</a></li>
<li id="_sidebar_6.4.2.1.7"><a href="#sec-application-graphql-response-json.Examples.Field-errors-encountered-during-execution"><span class="spec-secid">6.4.2.1.7</span>Field errors encountered during execution</a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_6.5"><a href="#sec-Processing-the-response"><span class="spec-secid">6.5</span>Processing the response</a></li>
</ol>
</li>
<li id="_sidebar_index"><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</div>
</div>
</body>
</html>
